@isTest
public class  Commissions_PayoutCalculation_Test {         
    public static testMethod void mainTest1(){        
        String WLVTerritory = Commissions_Constants.WLV_TERRITORY_TEAM;  
        string status = Constants.ACTIVE_STATUS;
        string fullfilled = Constants.FULFILLMENT_STATUS;
        string type1 = Constants.ASSET_TYPE;
        string type = Constants.OFFICE_ACCOUNT_TYPE;
        set<id> QuotaIds = new set<id>();
        Map<id,quota__c> mapQuotas = new Map<id,quota__c>();
        Integer Year = Date.Today().Year(); 
        List<user> allUsers = new  List<user>();
        Profile p = [select id from profile where name='System Administrator'];
        User user2 = Commissions_TestDataFactory.createUser(Null,p.id,null,'test154122222@move.com','test1541222222@move.com',false,WLVTerritory);
        user2.Vacation_Start_Date__c = Date.today();
        user2.Vacation_End_Date__c = Date.today();
        User2.Team__c = WLVTerritory;
        User2.LastName ='Riggio';
        User2.FirstName='Heather';
        insert User2;
       
        id rectypidaccount = Schema.SObjectType.Account.getRecordTypeInfosByName().get('B2B').getRecordTypeId();
       
        DisabledTrigger__c Dtrg = new DisabledTrigger__c(Name= 'Disabled',TaskTrigger__c = 'Test@test.com',AssetTrigger__c = 'test@test.com');
        insert Dtrg; 
        commission_settings__c setting = new commission_settings__c();
        setting.Name = 'workflows';
        setting.product1__c = 'Top Producer';
        setting.product2__c = 'Reesio';
        setting.Asset_name1__c = 'Top Producer CRM';
        setting.Asset_name2__c = 'FiveStreet';
        insert setting;      
        
        CommissionTeams__c cmt = new CommissionTeams__c(Name= 'MANAGERS_TEAM' , Team_Name__c = 'Managers Team');
        insert cmt; 
        CommissionTeams__c cmt1 = new CommissionTeams__c(Name= 'COLLECTION_TEAM' , Team_Name__c = 'Collections Team');
        insert cmt1;  
        CommissionTeams__c cmt2 = new CommissionTeams__c(Name= 'COLLECTIONS_CLIENT_RELATIONS_MANAGERS' , Team_Name__c = 'Collections Client Relations Manager');
        insert cmt2;  
        CommissionTeams__c cmt3 = new CommissionTeams__c(Name= 'BROKER_REGIONAL_DIRECTORS_TEAM' , Team_Name__c = 'Broker Regional Directors Sales Team');
        insert cmt3;  
        CommissionTeams__c cmt4 = new CommissionTeams__c(Name= 'CLIENT_RELATIONS_MANAGERS' , Team_Name__c = 'Client Relations Manager');
        insert cmt4;  
                      
        Account acc = new Account();
        acc.Name = 'Test';
        acc.ShippingStreet = 'Test Street';
        acc.ShippingCity = 'City';
        acc.ShippingState = 'State';
        acc.ShippingPostalCode = '12345';
        acc.Primary_Email__c = 'theAcc@move.com';
        acc.RecordTypeId = rectypidaccount;
        acc.Type = type;
        acc.OwnerId = user2.id;
        insert acc;
                
        Product2 prdctdata = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata.ProductCode ='ADVANTAGE';
        insert prdctdata; 
         
                         
        Product2 prdctdata2 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata2.ProductCode ='COBROKE';
        insert prdctdata2; 
                        
        Product2 prdctdata3 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata3.ProductCode ='DACAMPAIGN';
        insert prdctdata3; 
                        
        Product2 prdctdata4 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata4.ProductCode ='ADVANTAGE';
        insert prdctdata4; 
                        
        Product2 prdctdata5 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata5.ProductCode ='DIGITALAGENT';
        insert prdctdata5; 
                        
        Product2 prdctdata6 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata6.ProductCode ='DOMAINNAME';
        insert prdctdata6; 
                        
        Product2 prdctdata7 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata7.ProductCode ='FEATCMA';
        insert prdctdata7; 
                        
        Product2 prdctdata8 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata8.ProductCode ='FEATDISP';
        insert prdctdata8; 
                        
        Product2 prdctdata9 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata9.ProductCode ='FEATHOMES';
        insert prdctdata9; 
        
        Product2 prdctdata10 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata10.ProductCode ='FIVESTREET';
        insert prdctdata10;
        Product2 prdctdata11 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata11.ProductCode ='LISTHUBPRO';
        insert prdctdata11;
        Product2 prdctdata12 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata12.ProductCode ='MRKTBUILD';
        insert prdctdata12;
        Product2 prdctdata13 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata13.ProductCode ='SELLERLEAD';
        insert prdctdata13;
        Product2 prdctdata14 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata14.ProductCode ='SELLERLEADBUNDLE';
        insert prdctdata14;
        Product2 prdctdata15 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata15.ProductCode ='SHOWCASE';
        insert prdctdata15;
        Product2 prdctdata16 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata16.ProductCode ='SIGNRIDER';
        insert prdctdata16;
        Product2 prdctdata17 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata17.ProductCode ='STANDLIST';
        insert prdctdata17;
        Product2 prdctdata18 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata18.ProductCode ='TOPCRM';
        insert prdctdata18;
        Product2 prdctdata19 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata19.ProductCode ='TOPIDX';
        insert prdctdata19;
        Product2 prdctdata20 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata20.ProductCode ='TOPMRKSNP';
        insert prdctdata20;
        Product2 prdctdata21 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata21.ProductCode ='TOPWEB';
        insert prdctdata21;
        Product2 prdctdata22 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata22.ProductCode ='TOPWEBFEE';
        insert prdctdata22;
        Product2 prdctdata23 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata23.ProductCode ='TRKPHNMBR';
        insert prdctdata23;
        Product2 prdctdata24 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata24.ProductCode ='TURBO';
        insert prdctdata24;
        Product2 prdctdata25 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata25.ProductCode ='WEBSITE';
        insert prdctdata25; 
        Product2 prdctdata26 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata26.ProductCode ='WEBSITEFEE';
        insert prdctdata26; 
        Product2 prdctdata27 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata27.ProductCode ='REESIO';
        insert prdctdata27; 
        Product2 prdctdata28 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata28.ProductCode ='RSRESPOND';
        insert prdctdata28; 
        Product2 prdctdata29 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata29.ProductCode ='RSCONNECT';
        insert prdctdata29; 
  Product2 prdctdata30 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata30.ProductCode ='RSTRANSACT';
        insert prdctdata30; 
  
  
        Id pricebookId= Test.getStandardPricebookId();        
        PricebookEntry standardPrice = new PricebookEntry(Pricebook2Id = pricebookId, Product2Id = prdctdata.Id, UnitPrice = 10000, IsActive = true);
        insert standardPrice;         
        Pricebook2 custompb = new Pricebook2(Name = 'Standard Price Book 2009', Description = 'Price Book 2009 Products', IsActive = true);
        insert custompb;            
        PricebookEntry custompbe = new PricebookEntry(Pricebook2Id = custompb.Id, Product2Id = prdctdata.Id, UnitPrice = 1, IsActive = true);
        insert custompbe;
           
        set<Id> ProductIds = new set<id>();
        ProductIds.add(prdctdata.id);
            
        Order r =new Order();       
        r.AccountId=Acc.id;
        r.Name='test';
        r.EffectiveDate=System.today();
        //r.Contractid=c.id;
        r.Status='Created';
        r.Pricebook2Id = pricebookId;
        r.OwnerId = user2.id;
        insert r;
          
        OrderItem oi = new OrderItem(OrderId=r.id,Quantity=1,PricebookEntryId=standardPrice.id,unitPrice=1);
        insert oi;
        set<Id> orderOwnerIds = new set<id>();
        orderOwnerIds.add(user2.id);
        
        id rectypidasset = Schema.SObjectType.Asset.getRecordTypeInfosByName().get('Parent').getRecordTypeId();    
        Asset assets = Commissions_TestDataFactory.CreateAsset(rectypidasset,user2.Id,prdctdata.Id,false);
        assets.RecordTypeId = rectypidasset;
        assets.Name = 'test';
        assets.Ownerid = user2.id;
        assets.Renewal_Status__c = 'Renew';
        assets.Auto_Renewal__c = 'No';
        assets.Asset_Type__c = type1;
        assets.Product2Id = prdctdata.id;
        assets.Fulfillment_Status__c = fullfilled;
        assets.Status = status;
        assets.At_Risk__c = false;
        assets.Billing_Period__c = 'Monthly';
        assets.Start_Date__c = system.today();
        assets.End_Date__c = system.today().addDays(10);
        assets.Asset_Type__c = 'Parent';
        assets.Auto_Renewal__c  = 'Yes';
        assets.Line_Type__c = 'Add';
        assets.Price = 10.00;
        assets.Sign_in_AE__c= user2.id;
        assets.Commission_field__c='Ignore';
        assets.Total_Net__c = 1200.00;
        assets.Delta_Price__c = -120.00;
        assets.Order_Line_Item__c = oi.id;
        assets.AccountId = acc.id;      
        insert assets;
        assets.Line_Type__c = 'Renew';
        update assets;
        Period__c period = Commissions_TestDataFactory.Createperiod('Test',false,Date.today().toStartOfMonth());
        period.Start_Date__c = date.today();
        period.Current_Quater__c = 'Q1';
        period.Agent_asset_Owner__c = 50;
        period.asset_Owner__c = 50;       
        insert period;
        
        id rectypidp = Schema.SObjectType.Payout__c.getRecordTypeInfosByName().get(WLVTerritory).getRecordTypeId(); 
        Payout__c pa= Commissions_TestDataFactory.CreatePayout('New Sale without Qualifier',rectypidp, 10.00, 50.00,null,null,2.25,1.05,2.02,3.00,false);
        pa.Period__c = period.Id;
        insert pa; 
        
        List<Quota__c> allQuotas = new List<Quota__c>();     
        Quota__c  QuotaHandler = Commissions_TestDataFactory.CreateQuota(user2.id,period.id,false);
        QuotaHandler.Target_Amount__c = 1000;
        QuotaHandler.User__c= User2.Id;
        QuotaHandler.User_Team__c = WLVTerritory;
        QuotaHandler.Period_Name__c = period.id;
        QuotaHandler.Target_Amount_2__c = 1000; 
        QuotaHandler.Is_Kicker__c = false;
       
        insert QuotaHandler;
        Quota__c  QuotaHandler1 = Commissions_TestDataFactory.CreateQuota(user2.id,period.id,false);
        QuotaHandler1.Target_Amount__c = 1000;
        QuotaHandler1.User__c= User2.Id;
        QuotaHandler1.User_Team__c = WLVTerritory;
        QuotaHandler1.Period_Name__c = period.id;
        QuotaHandler1.Target_Amount_2__c = 1000; 
        QuotaHandler1.Is_Kicker__c = true;
       
        insert QuotaHandler1;
        QuotaIds.add(QuotaHandler.id);
        QuotaIds.add(QuotaHandler1.id);
        mapQuotas.put(QuotaHandler.id,QuotaHandler);
        mapQuotas.put(QuotaHandler1.id,QuotaHandler1);

        Map<Id, Asset> newTriggerValues = new Map<Id, Asset> ();
        newTriggerValues.put(assets.Id,assets);
        List<Commission__c> allcommissions = new List<Commission__c>();   
        id rectypidq = Schema.SObjectType.Commission__c.getRecordTypeInfosByName().get('Other Products').getRecordTypeId();  
        Commission__c  comm = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata.Id,rectypidq,null,false);
        comm.Related_to_Asset__c = assets.Id;
        comm.Asset_Amount__c = 100;
        comm.line_type__C = 'Add';
        comm.user_team__c = WLVTerritory;
        comm.Commissionable_Amount2__c= 10.00;
        //insert comm;   
        allcommissions.add(comm);
        Commission__c  comm1 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata.Id,rectypidq,null,false);
        comm1.Related_to_Asset__c = assets.Id;
        comm1.Asset_Amount__c = 100;
        comm1.line_type__C = 'Add';
        comm1.user_team__c = WLVTerritory;
        comm1.Commissionable_Amount2__c=10.00;
        //insert comm1; 
        allcommissions.add(comm1);
        Commission__c  comm2 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata2.Id,rectypidq,null,false);
        comm2.Related_to_Asset__c = assets.Id;
        comm2.Asset_Amount__c = 100;
        comm2.line_type__C = 'Add';
        comm2.user_team__c = WLVTerritory;
        comm2.Commissionable_Amount2__c=10.00;
        //insert comm2;
        allcommissions.add(comm2);
        Commission__c  comm3 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata3.Id,rectypidq,null,false);
        comm3.Related_to_Asset__c = assets.Id;
        comm3.Asset_Amount__c = 100;
        comm3.line_type__C = 'Add';
        comm3.user_team__c = WLVTerritory;
        comm3.Commissionable_Amount2__c=10.00;
        allcommissions.add(comm3);
        Commission__c  comm4 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata4.Id,rectypidq,null,false);
        comm4.Related_to_Asset__c = assets.Id;
        comm4.Asset_Amount__c = 100;
        comm4.line_type__C = 'Add';
        comm4.user_team__c = WLVTerritory;
        comm4.Commissionable_Amount2__c=10.00;
        
        //insert comm3;
        allcommissions.add(comm4);
        Commission__c  comm5 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata5.Id,rectypidq,null,false);
        comm5.Related_to_Asset__c = assets.Id;
        comm5.Asset_Amount__c = 100;
        comm5.line_type__C = 'add';
        comm5.user_team__c = WLVTerritory;
        comm5.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm5);
        Commission__c  comm6 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata6.Id,rectypidq,null,false);
        comm6.Related_to_Asset__c = assets.Id;
        comm6.Asset_Amount__c = 100;
        comm6.line_type__C = 'add';
        comm6.user_team__c = WLVTerritory;
        comm6.Commissionable_Amount2__c=10.00;
        
        //insert comm3;
        allcommissions.add(comm6);
        Commission__c  comm7 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata7.Id,rectypidq,null,false);
        comm7.Related_to_Asset__c = assets.Id;
        comm7.Asset_Amount__c = 100;
        comm7.line_type__C = 'Add';
        comm7.user_team__c = WLVTerritory;
        comm7.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm7);
        Commission__c  comm8 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata8.Id,rectypidq,null,false);
        comm8.Related_to_Asset__c = assets.Id;
        comm8.Asset_Amount__c = 100;
        comm8.line_type__C = 'Add';
        comm8.user_team__c = WLVTerritory;
        comm8.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm8);
        Commission__c  comm9 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata9.Id,rectypidq,null,false);
        comm9.Related_to_Asset__c = assets.Id;
        comm9.Asset_Amount__c = 100;
        comm9.line_type__C = 'Add';
        comm9.user_team__c = WLVTerritory;
        comm9.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm9);
        Commission__c  comm10 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata10.Id,rectypidq,null,false);
        comm10.Related_to_Asset__c = assets.Id;
        comm10.Asset_Amount__c = 100;
        comm10.line_type__C = 'Add';
        comm10.user_team__c = WLVTerritory;
        comm10.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm10);
        Commission__c  comm25 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata25.Id,rectypidq,null,false);
        comm25.Related_to_Asset__c = assets.Id;
        comm25.Asset_Amount__c = 100;
        comm25.line_type__C = 'Add';
        comm25.user_team__c = WLVTerritory;
        comm25.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm25);
        Commission__c  comm11 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata11.Id,rectypidq,null,false);
        comm11.Related_to_Asset__c = assets.Id;
        comm11.Asset_Amount__c = 100;
        comm11.line_type__C = 'Add';
        comm11.user_team__c = WLVTerritory;
        comm11.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm11);
        Commission__c  comm12 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata12.Id,rectypidq,null,false);
        comm12.Related_to_Asset__c = assets.Id;
        comm12.Asset_Amount__c = 100;
        comm12.line_type__C = 'Add';
        comm12.user_team__c = WLVTerritory;
        comm12.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm12);
        Commission__c  comm13 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata13.Id,rectypidq,null,false);
        comm13.Related_to_Asset__c = assets.Id;
        comm13.Asset_Amount__c = 100;
        comm13.line_type__C = 'Add';
        comm13.user_team__c = WLVTerritory;
        comm13.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm13);
        Commission__c  comm14 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata14.Id,rectypidq,null,false);
        comm14.Related_to_Asset__c = assets.Id;
        comm14.Asset_Amount__c = 100;
        comm14.line_type__C = 'Add';
        comm14.user_team__c = WLVTerritory;
        comm14.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm14);
        Commission__c  comm15 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata15.Id,rectypidq,null,false);
        comm15.Related_to_Asset__c = assets.Id;
        comm15.Asset_Amount__c = 100;
        comm15.line_type__C = 'Add';
        comm15.user_team__c = WLVTerritory;
        comm15.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm15);
        Commission__c  comm16 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata16.Id,rectypidq,null,false);
        comm16.Related_to_Asset__c = assets.Id;
        comm16.Asset_Amount__c = 100;
        comm16.line_type__C = 'Add';
        comm16.user_team__c = WLVTerritory;
        comm16.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm16);
        Commission__c  comm17 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata17.Id,rectypidq,null,false);
        comm17.Related_to_Asset__c = assets.Id;
        comm17.Asset_Amount__c = 100;
        comm17.line_type__C = 'Add';
        comm17.user_team__c = WLVTerritory;
        comm17.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm17);
        Commission__c  comm18 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata18.Id,rectypidq,null,false);
        comm18.Related_to_Asset__c = assets.Id;
        comm18.Asset_Amount__c = 100;
        comm18.line_type__C = 'Add';
        comm18.user_team__c = WLVTerritory;
        comm18.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm18);
        Commission__c  comm19 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata19.Id,rectypidq,null,false);
        comm19.Related_to_Asset__c = assets.Id;
        comm19.Asset_Amount__c = 100;
        comm19.line_type__C = 'Add';
        comm19.user_team__c = WLVTerritory;
        comm19.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm19);
        Commission__c  comm20 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata20.Id,rectypidq,null,false);
        comm20.Related_to_Asset__c = assets.Id;
        comm20.Asset_Amount__c = 100;
        comm20.line_type__C = 'Add';
        comm20.user_team__c = WLVTerritory;
        comm20.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm20);
        Commission__c  comm21 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata21.Id,rectypidq,null,false);
        comm21.Related_to_Asset__c = assets.Id;
        comm21.Asset_Amount__c = 100;
        comm21.line_type__C = 'Add';
        comm21.user_team__c = WLVTerritory;
        comm21.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm21);
        Commission__c  comm22 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata22.Id,rectypidq,null,false);
        comm22.Related_to_Asset__c = assets.Id;
        comm22.Asset_Amount__c = 100;
        comm22.line_type__C = 'Add';
        comm22.user_team__c = WLVTerritory;
        comm22.Commissionable_Amount2__c=10.00;
       
        //insert comm3;
        allcommissions.add(comm22);
        Commission__c  comm23 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata23.Id,rectypidq,null,false);
        comm23.Related_to_Asset__c = assets.Id;
        comm23.Asset_Amount__c = 100;
        comm23.line_type__C = 'Add';
        comm23.user_team__c = WLVTerritory;
        comm23.Commissionable_Amount2__c=10.00;
        comm23.Related_to_Quota__c=QuotaHandler.ID;
        
        //insert comm3;
        allcommissions.add(Comm23);
        Commission__c  comm24 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata24.Id,rectypidq,null,false);
        comm24.Related_to_Asset__c = assets.Id;
        comm24.Asset_Amount__c = 100;
        comm24.line_type__C = 'Add';
        comm24.user_team__c = WLVTerritory;
        comm24.Commissionable_Amount2__c=10.00;
        comm24.related_to_quota__C=QuotaHandler.Id;       
        allcommissions.add(comm24);
        
        Commission__c  comm246 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata26.Id,rectypidq,null,false);
        comm246.Related_to_Asset__c = assets.Id;
        comm246.Asset_Amount__c = 100;
        comm246.line_type__C = 'Add';
        comm246.user_team__c = WLVTerritory;
        comm246.Commissionable_Amount2__c=10.00;
        comm246.related_to_quota__C=QuotaHandler.Id;       
        allcommissions.add(comm246);
        
        Commission__c  comm241 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata27.Id,rectypidq,null,false);
        comm241.Related_to_Asset__c = assets.Id;
        comm241.Asset_Amount__c = 100;
        comm241.line_type__C = 'Add';
        comm241.user_team__c = WLVTerritory;
        comm241.Commissionable_Amount2__c=10.00;
        comm241.related_to_quota__C=QuotaHandler.Id;       
        allcommissions.add(comm241);
        
        Commission__c  comm242 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata28.Id,rectypidq,null,false);
        comm242.Related_to_Asset__c = assets.Id;
        comm242.Asset_Amount__c = 100;
        comm242.line_type__C = 'Add';
        comm242.user_team__c = WLVTerritory;
        comm242.Commissionable_Amount2__c=10.00;
        comm242.related_to_quota__C=QuotaHandler.Id;       
        allcommissions.add(comm242);
        
        //Renew
        
        Commission__c  commr = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata.Id,rectypidq,null,false);
        commr.Related_to_Asset__c = assets.Id;
        commr.Asset_Amount__c = 100;
        commr.line_type__C = 'Renew';
        commr.user_team__c = WLVTerritory;
        commr.Commissionable_Amount2__c= 10.00;
        //insert comm;   
        allcommissions.add(commr);
        Commission__c  comm1r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata.Id,rectypidq,null,false);
        comm1r.Related_to_Asset__c = assets.Id;
        comm1r.Asset_Amount__c = 100;
        comm1r.line_type__C = 'Renew';
        comm1r.user_team__c = WLVTerritory;
        comm1r.Commissionable_Amount2__c=10.00;
        //insert comm1; 
        allcommissions.add(comm1r);
        Commission__c  comm2r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata2.Id,rectypidq,null,false);
        comm2r.Related_to_Asset__c = assets.Id;
        comm2r.Asset_Amount__c = 100;
        comm2r.line_type__C = 'Renew';
        comm2r.user_team__c = WLVTerritory;
        comm2r.Commissionable_Amount2__c=10.00;
        //insert comm2;
        allcommissions.add(comm2r);
        Commission__c  comm3r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata3.Id,rectypidq,null,false);
        comm3r.Related_to_Asset__c = assets.Id;
        comm3r.Asset_Amount__c = 100;
        comm3r.line_type__C = 'Renew';
        comm3r.user_team__c = WLVTerritory;
        comm3r.Commissionable_Amount2__c=10.00;
        allcommissions.add(comm3r);
        Commission__c  comm4r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata4.Id,rectypidq,null,false);
        comm4r.Related_to_Asset__c = assets.Id;
        comm4r.Asset_Amount__c = 100;
        comm4r.line_type__C = 'Renew';
        comm4r.user_team__c = WLVTerritory;
        comm4r.Commissionable_Amount2__c=10.00;
        
        //insert comm3;
        allcommissions.add(comm4r);
        Commission__c  comm5r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata5.Id,rectypidq,null,false);
        comm5r.Related_to_Asset__c = assets.Id;
        comm5r.Asset_Amount__c = 100;
        comm5r.line_type__C = 'Renew';
        comm5r.user_team__c = WLVTerritory;
        comm5r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm5r);
        Commission__c  comm6r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata6.Id,rectypidq,null,false);
        comm6r.Related_to_Asset__c = assets.Id;
        comm6r.Asset_Amount__c = 100;
        comm6r.line_type__C = 'Renew';
        comm6r.user_team__c = WLVTerritory;
        comm6r.Commissionable_Amount2__c=10.00;
        
        //insert comm3;
        allcommissions.add(comm6r);
        Commission__c  comm7r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata7.Id,rectypidq,null,false);
        comm7r.Related_to_Asset__c = assets.Id;
        comm7r.Asset_Amount__c = 100;
        comm7r.line_type__C = 'Renew';
        comm7r.user_team__c = WLVTerritory;
        comm7r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm7r);
        Commission__c  comm8r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata8.Id,rectypidq,null,false);
        comm8r.Related_to_Asset__c = assets.Id;
        comm8r.Asset_Amount__c = 100;
        comm8r.line_type__C = 'Renew';
        comm8r.user_team__c = WLVTerritory;
        comm8r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm8r);
        Commission__c  comm9r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata9.Id,rectypidq,null,false);
        comm9r.Related_to_Asset__c = assets.Id;
        comm9r.Asset_Amount__c = 100;
        comm9r.line_type__C = 'Renew';
        comm9r.user_team__c = WLVTerritory;
        comm9r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm9r);
        Commission__c  comm10r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata10.Id,rectypidq,null,false);
        comm10r.Related_to_Asset__c = assets.Id;
        comm10r.Asset_Amount__c = 100;
        comm10r.line_type__C = 'Renew';
        comm10r.user_team__c = WLVTerritory;
        comm10r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm10r);
        Commission__c  comm25r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata25.Id,rectypidq,null,false);
        comm25r.Related_to_Asset__c = assets.Id;
        comm25r.Asset_Amount__c = 100;
        comm25r.line_type__C = 'Renew';
        comm25r.user_team__c = WLVTerritory;
        comm25r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm25r);
        Commission__c  comm11r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata11.Id,rectypidq,null,false);
        comm11r.Related_to_Asset__c = assets.Id;
        comm11r.Asset_Amount__c = 100;
        comm11r.line_type__C = 'Renew';
        comm11r.user_team__c = WLVTerritory;
        comm11r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm11r);
        Commission__c  comm12r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata12.Id,rectypidq,null,false);
        comm12r.Related_to_Asset__c = assets.Id;
        comm12r.Asset_Amount__c = 100;
        comm12r.line_type__C = 'Renew';
        comm12r.user_team__c = WLVTerritory;
        comm12r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm12r);
        Commission__c  comm13r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata13.Id,rectypidq,null,false);
        comm13r.Related_to_Asset__c = assets.Id;
        comm13r.Asset_Amount__c = 100;
        comm13r.line_type__C = 'Renew';
        comm13r.user_team__c = WLVTerritory;
        comm13r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm13r);
        Commission__c  comm14r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata14.Id,rectypidq,null,false);
        comm14r.Related_to_Asset__c = assets.Id;
        comm14r.Asset_Amount__c = 100;
        comm14r.line_type__C = 'Renew';
        comm14r.user_team__c = WLVTerritory;
        comm14r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm14r);
        Commission__c  comm15r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata15.Id,rectypidq,null,false);
        comm15r.Related_to_Asset__c = assets.Id;
        comm15r.Asset_Amount__c = 100;
        comm15r.line_type__C = 'Renew';
        comm15r.user_team__c = WLVTerritory;
        comm15r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm15r);
        Commission__c  comm16r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata16.Id,rectypidq,null,false);
        comm16r.Related_to_Asset__c = assets.Id;
        comm16r.Asset_Amount__c = 100;
        comm16r.line_type__C = 'Renew';
        comm16r.user_team__c = WLVTerritory;
        comm16r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm16r);
        Commission__c  comm17r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata17.Id,rectypidq,null,false);
        comm17r.Related_to_Asset__c = assets.Id;
        comm17r.Asset_Amount__c = 100;
        comm17r.line_type__C = 'Renew';
        comm17r.user_team__c = WLVTerritory;
        comm17r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm17r);
        Commission__c  comm18r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata18.Id,rectypidq,null,false);
        comm18r.Related_to_Asset__c = assets.Id;
        comm18r.Asset_Amount__c = 100;
        comm18r.line_type__C = 'Renew';
        comm18r.user_team__c = WLVTerritory;
        comm18r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm18r);
        Commission__c  comm19r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata19.Id,rectypidq,null,false);
        comm19r.Related_to_Asset__c = assets.Id;
        comm19r.Asset_Amount__c = 100;
        comm19r.line_type__C = 'Renew';
        comm19r.user_team__c = WLVTerritory;
        comm19r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm19r);
        Commission__c  comm20r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata20.Id,rectypidq,null,false);
        comm20r.Related_to_Asset__c = assets.Id;
        comm20r.Asset_Amount__c = 100;
        comm20r.line_type__C = 'Renew';
        comm20r.user_team__c = WLVTerritory;
        comm20r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm20r);
        Commission__c  comm21r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata21.Id,rectypidq,null,false);
        comm21r.Related_to_Asset__c = assets.Id;
        comm21r.Asset_Amount__c = 100;
        comm21r.line_type__C = 'Renew';
        comm21r.user_team__c = WLVTerritory;
        comm21r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm21r);
        Commission__c  comm22r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata22.Id,rectypidq,null,false);
        comm22r.Related_to_Asset__c = assets.Id;
        comm22r.Asset_Amount__c = 100;
        comm22r.line_type__C = 'Renew';
        comm22r.user_team__c = WLVTerritory;
        comm22r.Commissionable_Amount2__c=10.00;
       
        //insert comm3;
        allcommissions.add(comm22r);
        Commission__c  comm23r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata23.Id,rectypidq,null,false);
        comm23r.Related_to_Asset__c = assets.Id;
        comm23r.Asset_Amount__c = 100;
        comm23r.line_type__C = 'Renew';
        comm23r.user_team__c = WLVTerritory;
        comm23r.Commissionable_Amount2__c=10.00;
        comm23r.Related_to_Quota__c=QuotaHandler.ID;
        
        //insert comm3;
        allcommissions.add(Comm23r);
        Commission__c  comm24r = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata24.Id,rectypidq,null,false);
        comm24r.Related_to_Asset__c = assets.Id;
        comm24r.Asset_Amount__c = 100;
        comm24r.line_type__C = 'Renew';
        comm24r.user_team__c = WLVTerritory;
        comm24r.Commissionable_Amount2__c=10.00;
        comm24r.related_to_quota__C=QuotaHandler.Id;       
        allcommissions.add(comm24r);
        Commission__c  comm25r1 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata26.Id,rectypidq,null,false);
        comm25r1.Related_to_Asset__c = assets.Id;
        comm25r1.Asset_Amount__c = 100;
        comm25r1.line_type__C = 'Renew';
        comm25r1.user_team__c = WLVTerritory;
        comm25r1.Commissionable_Amount2__c=10.00;
        comm25r1.related_to_quota__C=QuotaHandler.Id;
        comm25r1.Renewal_w_Qualifier_Comm_ble_Amount__c =122;      
        allcommissions.add(comm25r1);
        
        Commission__c  comm25r12 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata27.Id,rectypidq,null,false);
        comm25r12.Related_to_Asset__c = assets.Id;
        comm25r12.Asset_Amount__c = 100;
        comm25r12.line_type__C = 'Renew';
        comm25r12.user_team__c = WLVTerritory;
        comm25r12.Commissionable_Amount2__c=10.00;
        comm25r12.related_to_quota__C=QuotaHandler.Id;
        comm25r12.Renewal_w_Qualifier_Comm_ble_Amount__c =122;      
        allcommissions.add(comm25r12);
        
        Commission__c  comm25r13 = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata28.Id,rectypidq,null,false);
        comm25r13.Related_to_Asset__c = assets.Id;
        comm25r13.Asset_Amount__c = 100;
        comm25r13.line_type__C = 'Renew';
        comm25r13.user_team__c = WLVTerritory;
        comm25r13.Commissionable_Amount2__c=10.00;
        comm25r13.related_to_quota__C=QuotaHandler.Id;
        comm25r13.Renewal_w_Qualifier_Comm_ble_Amount__c =122;      
        allcommissions.add(comm25r13);
        
        Commission__c  comm25r134 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata29.Id,rectypidq,null,false);
        comm25r134.Related_to_Asset__c = assets.Id;
        comm25r134.Asset_Amount__c = 100;
        comm25r134.line_type__C = 'Renew';
        comm25r134.user_team__c = WLVTerritory;
        comm25r134.Commissionable_Amount2__c=10.00;
        comm25r134.related_to_quota__C=QuotaHandler1.Id;
        comm25r134.Renewal_w_Qualifier_Comm_ble_Amount__c =122;      
        allcommissions.add(comm25r134);
        
        Commission__c  comm25r1345 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata30.Id,rectypidq,null,false);
        comm25r1345.Related_to_Asset__c = assets.Id;
        comm25r1345.Asset_Amount__c = 100;
        comm25r1345.line_type__C = 'Renew';
        comm25r1345.user_team__c = WLVTerritory;
        comm25r1345.Commissionable_Amount2__c=10.00;
        comm25r1345.related_to_quota__C=QuotaHandler1.Id;
        comm25r1345.Renewal_w_Qualifier_Comm_ble_Amount__c =122;      
        allcommissions.add(comm25r1345);
        
        
        insert allcommissions; 
        test.starttest();     
        Commissions_PayoutCalculation cp = new Commissions_PayoutCalculation();
        system.debug('QuotaIds--->'+QuotaIds);
        system.debug('mapQuotas--->'+mapQuotas);
        cp.PayoutCalculation(QuotaIds,mapQuotas);
        Test.stoptest();
    }
    public static testMethod void mainTest2(){        
        String WLVTerritory = Commissions_Constants.WLV_TERRITORY_TEAM;  
        string status = Constants.ACTIVE_STATUS;
        string fullfilled = Constants.FULFILLMENT_STATUS;
        string type1 = Constants.ASSET_TYPE;
        string type = Constants.OFFICE_ACCOUNT_TYPE;
        set<id> QuotaIds = new set<id>();
        Map<id,quota__c> mapQuotas = new Map<id,quota__c>();
        Integer Year = Date.Today().Year(); 
        List<user> allUsers = new  List<user>();
        Profile p = [select id from profile where name='System Administrator'];
        User user2 = Commissions_TestDataFactory.createUser(Null,p.id,null,'test154122222@move.com','test1541222222@move.com',false,WLVTerritory);
        user2.Vacation_Start_Date__c = Date.today();
        user2.Vacation_End_Date__c = Date.today();
        User2.Team__c = WLVTerritory;
        User2.LastName ='Riggio';
        User2.FirstName='Heather';
        insert User2;
       
        id rectypidaccount = Schema.SObjectType.Account.getRecordTypeInfosByName().get('B2B').getRecordTypeId();
       
        DisabledTrigger__c Dtrg = new DisabledTrigger__c(Name= 'Disabled',TaskTrigger__c = 'Test@test.com',AssetTrigger__c = 'test@test.com');
        insert Dtrg;       
        commission_settings__c setting = new commission_settings__c();
        setting.Name = 'workflows';
        setting.product1__c = 'Top Producer';
        setting.product2__c = 'Reesio';
        setting.Asset_name1__c = 'Top Producer CRM';
        setting.Asset_name2__c = 'FiveStreet';
        insert setting;
       CommissionTeams__c cmt = new CommissionTeams__c(Name= 'MANAGERS_TEAM' , Team_Name__c = 'Managers Team');
        insert cmt; 
        CommissionTeams__c cmt1 = new CommissionTeams__c(Name= 'COLLECTION_TEAM' , Team_Name__c = 'Collections Team');
        insert cmt1;  
        CommissionTeams__c cmt2 = new CommissionTeams__c(Name= 'COLLECTIONS_CLIENT_RELATIONS_MANAGERS' , Team_Name__c = 'Collections Client Relations Manager');
        insert cmt2;  
        CommissionTeams__c cmt3 = new CommissionTeams__c(Name= 'BROKER_REGIONAL_DIRECTORS_TEAM' , Team_Name__c = 'Broker Regional Directors Sales Team');
        insert cmt3; 
         CommissionTeams__c cmt4 = new CommissionTeams__c(Name= 'CLIENT_RELATIONS_MANAGERS' , Team_Name__c = 'Client Relations Manager');
        insert cmt4;  
        Account acc = new Account();
        acc.Name = 'Test';
        acc.ShippingStreet = 'Test Street';
        acc.ShippingCity = 'City';
        acc.ShippingState = 'State';
        acc.ShippingPostalCode = '12345';
        acc.Primary_Email__c = 'theAcc@move.com';
        acc.RecordTypeId = rectypidaccount;
        acc.Type = type;
        acc.OwnerId = user2.id;
        insert acc;
                
        Product2 prdctdata = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata.ProductCode ='ADVANTAGE';
        insert prdctdata; 
         
                         
        Product2 prdctdata2 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata2.ProductCode ='COBROKE';
        insert prdctdata2; 
                        
        Product2 prdctdata3 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata3.ProductCode ='DACAMPAIGN';
        insert prdctdata3; 
                        
        Product2 prdctdata4 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata4.ProductCode ='ADVANTAGE';
        insert prdctdata4; 
                        
        Product2 prdctdata5 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata5.ProductCode ='DIGITALAGENT';
        insert prdctdata5; 
                        
        Product2 prdctdata6 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata6.ProductCode ='DOMAINNAME';
        insert prdctdata6; 
                        
        Product2 prdctdata7 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata7.ProductCode ='FEATCMA';
        insert prdctdata7; 
                        
        Product2 prdctdata8 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata8.ProductCode ='FEATDISP';
        insert prdctdata8; 
                        
        Product2 prdctdata9 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata9.ProductCode ='FEATHOMES';
        insert prdctdata9; 
        
        Product2 prdctdata10 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata10.ProductCode ='FIVESTREET';
        insert prdctdata10;
        Product2 prdctdata11 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata11.ProductCode ='LISTHUBPRO';
        insert prdctdata11;
        Product2 prdctdata12 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata12.ProductCode ='MRKTBUILD';
        insert prdctdata12;
        Product2 prdctdata13 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata13.ProductCode ='SELLERLEAD';
        insert prdctdata13;
        Product2 prdctdata14 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata14.ProductCode ='SELLERLEADBUNDLE';
        insert prdctdata14;
        Product2 prdctdata15 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata15.ProductCode ='SHOWCASE';
        insert prdctdata15;
        Product2 prdctdata16 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata16.ProductCode ='SIGNRIDER';
        insert prdctdata16;
        Product2 prdctdata17 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata17.ProductCode ='STANDLIST';
        insert prdctdata17;
        Product2 prdctdata18 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata18.ProductCode ='TOPCRM';
        insert prdctdata18;
        Product2 prdctdata19 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata19.ProductCode ='TOPIDX';
        insert prdctdata19;
        Product2 prdctdata20 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata20.ProductCode ='TOPMRKSNP';
        insert prdctdata20;
        Product2 prdctdata21 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata21.ProductCode ='TOPWEB';
        insert prdctdata21;
        Product2 prdctdata22 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata22.ProductCode ='TOPWEBFEE';
        insert prdctdata22;
        Product2 prdctdata23 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata23.ProductCode ='TRKPHNMBR';
        insert prdctdata23;
        Product2 prdctdata24 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata24.ProductCode ='TURBO';
        insert prdctdata24;
        Product2 prdctdata25 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata25.ProductCode ='WEBSITE';
        insert prdctdata25; 
        Product2 prdctdata26 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata26.ProductCode ='WEBSITEFEE';
        insert prdctdata26; 
        Product2 prdctdata27 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata27.ProductCode ='REESIO';
        insert prdctdata27; 
        Product2 prdctdata28 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata28.ProductCode ='RSRESPOND';
        insert prdctdata28; 
   Product2 prdctdata29 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata29.ProductCode ='RSCONNECT';
        insert prdctdata29; 
  Product2 prdctdata30 = Commissions_TestDataFactory.CreateProduct('Name',false);
        //prdctdata.Commission_Category__c = 'CFCB';
        prdctdata30.ProductCode ='RSTRANSACT';
        insert prdctdata30;
        Id pricebookId= Test.getStandardPricebookId();        
        PricebookEntry standardPrice = new PricebookEntry(Pricebook2Id = pricebookId, Product2Id = prdctdata.Id, UnitPrice = 10000, IsActive = true);
        insert standardPrice;         
        Pricebook2 custompb = new Pricebook2(Name = 'Standard Price Book 2009', Description = 'Price Book 2009 Products', IsActive = true);
        insert custompb;            
        PricebookEntry custompbe = new PricebookEntry(Pricebook2Id = custompb.Id, Product2Id = prdctdata.Id, UnitPrice = 1, IsActive = true);
        insert custompbe;
           
        set<Id> ProductIds = new set<id>();
        ProductIds.add(prdctdata.id);
            
        Order r =new Order();       
        r.AccountId=Acc.id;
        r.Name='test';
        r.EffectiveDate=System.today();
        //r.Contractid=c.id;
        r.Status='Created';
        r.Pricebook2Id = pricebookId;
        r.OwnerId = user2.id;
        insert r;
          
        OrderItem oi = new OrderItem(OrderId=r.id,Quantity=1,PricebookEntryId=standardPrice.id,unitPrice=1);
        insert oi;
        set<Id> orderOwnerIds = new set<id>();
        orderOwnerIds.add(user2.id);
        
        id rectypidasset = Schema.SObjectType.Asset.getRecordTypeInfosByName().get('Parent').getRecordTypeId();    
        Asset assets = Commissions_TestDataFactory.CreateAsset(rectypidasset,user2.Id,prdctdata.Id,false);
        assets.RecordTypeId = rectypidasset;
        assets.Name = 'test';
        assets.Ownerid = user2.id;
        assets.Renewal_Status__c = 'Renew';
        assets.Auto_Renewal__c = 'No';
        assets.Asset_Type__c = type1;
        assets.Product2Id = prdctdata.id;
        assets.Fulfillment_Status__c = fullfilled;
        assets.Status = status;
        assets.At_Risk__c = false;
        assets.Billing_Period__c = 'Monthly';
        assets.Start_Date__c = system.today();
        assets.End_Date__c = system.today().addDays(10);
        assets.Asset_Type__c = 'Parent';
        assets.Auto_Renewal__c  = 'Yes';
        assets.Line_Type__c = 'Add';
        assets.Price = 10.00;
        assets.Sign_in_AE__c= user2.id;
        assets.Commission_field__c='Ignore';
        assets.Total_Net__c = 1200.00;
        assets.Delta_Price__c = -120.00;
        assets.Order_Line_Item__c = oi.id;
        assets.AccountId = acc.id;      
        insert assets;
        assets.Line_Type__c = 'Renew';
        update assets;
        Period__c period = Commissions_TestDataFactory.Createperiod('Test',false,Date.today().toStartOfMonth());
        period.Start_Date__c = date.today();
        period.Current_Quater__c = 'Q1';
        period.Agent_asset_Owner__c = 50;
        period.asset_Owner__c = 50;       
        insert period;
        
        id rectypidp = Schema.SObjectType.Payout__c.getRecordTypeInfosByName().get(WLVTerritory).getRecordTypeId(); 
        Payout__c pa= Commissions_TestDataFactory.CreatePayout('New Sale without Qualifier',rectypidp, 10.00, 50.00,null,null,2.25,1.05,2.02,3.00,false);
        pa.Period__c = period.Id;
        insert pa; 
        
        List<Quota__c> allQuotas = new List<Quota__c>();     
        Quota__c  QuotaHandler = Commissions_TestDataFactory.CreateQuota(user2.id,period.id,false);
        QuotaHandler.Target_Amount__c = 1000;
        QuotaHandler.User__c= User2.Id;
        QuotaHandler.User_Team__c = WLVTerritory;
        QuotaHandler.Period_Name__c = period.id;
        QuotaHandler.Target_Amount_2__c = 1000; 
        QuotaHandler.Is_Kicker__c = false;
       
        insert QuotaHandler;
        Quota__c  QuotaHandler1 = Commissions_TestDataFactory.CreateQuota(user2.id,period.id,false);
        QuotaHandler1.Target_Amount__c = 1000;
        QuotaHandler1.User__c= User2.Id;
        QuotaHandler1.User_Team__c = WLVTerritory;
        QuotaHandler1.Period_Name__c = period.id;
        QuotaHandler1.Target_Amount_2__c = 1000; 
        QuotaHandler1.Is_Kicker__c = true;
       
        insert QuotaHandler1;
        QuotaIds.add(QuotaHandler.id);
        QuotaIds.add(QuotaHandler1.id);
        mapQuotas.put(QuotaHandler.id,QuotaHandler);
        mapQuotas.put(QuotaHandler1.id,QuotaHandler1);

        Map<Id, Asset> newTriggerValues = new Map<Id, Asset> ();
        newTriggerValues.put(assets.Id,assets);
        List<Commission__c> allcommissions = new List<Commission__c>();   
        id rectypidq = Schema.SObjectType.Commission__c.getRecordTypeInfosByName().get('Other Products').getRecordTypeId();  
        Commission__c  comm = Commissions_TestDataFactory.CreateComm(QuotaHandler.Id, prdctdata.Id,rectypidq,null,false);
        comm.Related_to_Asset__c = assets.Id;
        comm.Asset_Amount__c = 100;
        comm.line_type__C = 'Add';
        comm.user_team__c = WLVTerritory;
        comm.Commissionable_Amount2__c= 10.00;
        //insert comm;   
        allcommissions.add(comm);
        Commission__c  comm1 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata.Id,rectypidq,null,false);
        comm1.Related_to_Asset__c = assets.Id;
        comm1.Asset_Amount__c = 100;
        comm1.line_type__C = 'Add';
        comm1.user_team__c = WLVTerritory;
        comm1.Commissionable_Amount2__c=10.00;
        //insert comm1; 
        allcommissions.add(comm1);
        Commission__c  comm2 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata2.Id,rectypidq,null,false);
        comm2.Related_to_Asset__c = assets.Id;
        comm2.Asset_Amount__c = 100;
        comm2.line_type__C = 'Add';
        comm2.user_team__c = WLVTerritory;
        comm2.Commissionable_Amount2__c=10.00;
        //insert comm2;
        allcommissions.add(comm2);
        Commission__c  comm3 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata3.Id,rectypidq,null,false);
        comm3.Related_to_Asset__c = assets.Id;
        comm3.Asset_Amount__c = 100;
        comm3.line_type__C = 'Add';
        comm3.user_team__c = WLVTerritory;
        comm3.Commissionable_Amount2__c=10.00;
        allcommissions.add(comm3);
        Commission__c  comm4 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata4.Id,rectypidq,null,false);
        comm4.Related_to_Asset__c = assets.Id;
        comm4.Asset_Amount__c = 100;
        comm4.line_type__C = 'Add';
        comm4.user_team__c = WLVTerritory;
        comm4.Commissionable_Amount2__c=10.00;
        
        //insert comm3;
        allcommissions.add(comm4);
        Commission__c  comm5 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata5.Id,rectypidq,null,false);
        comm5.Related_to_Asset__c = assets.Id;
        comm5.Asset_Amount__c = 100;
        comm5.line_type__C = 'add';
        comm5.user_team__c = WLVTerritory;
        comm5.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm5);
        Commission__c  comm6 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata6.Id,rectypidq,null,false);
        comm6.Related_to_Asset__c = assets.Id;
        comm6.Asset_Amount__c = 100;
        comm6.line_type__C = 'add';
        comm6.user_team__c = WLVTerritory;
        comm6.Commissionable_Amount2__c=10.00;
        
        //insert comm3;
        allcommissions.add(comm6);
        Commission__c  comm7 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata7.Id,rectypidq,null,false);
        comm7.Related_to_Asset__c = assets.Id;
        comm7.Asset_Amount__c = 100;
        comm7.line_type__C = 'Add';
        comm7.user_team__c = WLVTerritory;
        comm7.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm7);
        Commission__c  comm8 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata8.Id,rectypidq,null,false);
        comm8.Related_to_Asset__c = assets.Id;
        comm8.Asset_Amount__c = 100;
        comm8.line_type__C = 'Add';
        comm8.user_team__c = WLVTerritory;
        comm8.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm8);
        Commission__c  comm9 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata9.Id,rectypidq,null,false);
        comm9.Related_to_Asset__c = assets.Id;
        comm9.Asset_Amount__c = 100;
        comm9.line_type__C = 'Add';
        comm9.user_team__c = WLVTerritory;
        comm9.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm9);
        Commission__c  comm10 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata10.Id,rectypidq,null,false);
        comm10.Related_to_Asset__c = assets.Id;
        comm10.Asset_Amount__c = 100;
        comm10.line_type__C = 'Add';
        comm10.user_team__c = WLVTerritory;
        comm10.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm10);
        Commission__c  comm25 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata25.Id,rectypidq,null,false);
        comm25.Related_to_Asset__c = assets.Id;
        comm25.Asset_Amount__c = 100;
        comm25.line_type__C = 'Add';
        comm25.user_team__c = WLVTerritory;
        comm25.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm25);
        Commission__c  comm11 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata11.Id,rectypidq,null,false);
        comm11.Related_to_Asset__c = assets.Id;
        comm11.Asset_Amount__c = 100;
        comm11.line_type__C = 'Add';
        comm11.user_team__c = WLVTerritory;
        comm11.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm11);
        Commission__c  comm12 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata12.Id,rectypidq,null,false);
        comm12.Related_to_Asset__c = assets.Id;
        comm12.Asset_Amount__c = 100;
        comm12.line_type__C = 'Add';
        comm12.user_team__c = WLVTerritory;
        comm12.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm12);
        Commission__c  comm13 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata13.Id,rectypidq,null,false);
        comm13.Related_to_Asset__c = assets.Id;
        comm13.Asset_Amount__c = 100;
        comm13.line_type__C = 'Add';
        comm13.user_team__c = WLVTerritory;
        comm13.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm13);
        Commission__c  comm14 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata14.Id,rectypidq,null,false);
        comm14.Related_to_Asset__c = assets.Id;
        comm14.Asset_Amount__c = 100;
        comm14.line_type__C = 'Add';
        comm14.user_team__c = WLVTerritory;
        comm14.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm14);
        Commission__c  comm15 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata15.Id,rectypidq,null,false);
        comm15.Related_to_Asset__c = assets.Id;
        comm15.Asset_Amount__c = 100;
        comm15.line_type__C = 'Add';
        comm15.user_team__c = WLVTerritory;
        comm15.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm15);
        Commission__c  comm16 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata16.Id,rectypidq,null,false);
        comm16.Related_to_Asset__c = assets.Id;
        comm16.Asset_Amount__c = 100;
        comm16.line_type__C = 'Add';
        comm16.user_team__c = WLVTerritory;
        comm16.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm16);
        Commission__c  comm17 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata17.Id,rectypidq,null,false);
        comm17.Related_to_Asset__c = assets.Id;
        comm17.Asset_Amount__c = 100;
        comm17.line_type__C = 'Add';
        comm17.user_team__c = WLVTerritory;
        comm17.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm17);
        Commission__c  comm18 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata18.Id,rectypidq,null,false);
        comm18.Related_to_Asset__c = assets.Id;
        comm18.Asset_Amount__c = 100;
        comm18.line_type__C = 'Add';
        comm18.user_team__c = WLVTerritory;
        comm18.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm18);
        Commission__c  comm19 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata19.Id,rectypidq,null,false);
        comm19.Related_to_Asset__c = assets.Id;
        comm19.Asset_Amount__c = 100;
        comm19.line_type__C = 'Add';
        comm19.user_team__c = WLVTerritory;
        comm19.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm19);
        Commission__c  comm20 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata20.Id,rectypidq,null,false);
        comm20.Related_to_Asset__c = assets.Id;
        comm20.Asset_Amount__c = 100;
        comm20.line_type__C = 'Add';
        comm20.user_team__c = WLVTerritory;
        comm20.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm20);
        Commission__c  comm21 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata21.Id,rectypidq,null,false);
        comm21.Related_to_Asset__c = assets.Id;
        comm21.Asset_Amount__c = 100;
        comm21.line_type__C = 'Add';
        comm21.user_team__c = WLVTerritory;
        comm21.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm21);
        Commission__c  comm22 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata22.Id,rectypidq,null,false);
        comm22.Related_to_Asset__c = assets.Id;
        comm22.Asset_Amount__c = 100;
        comm22.line_type__C = 'Add';
        comm22.user_team__c = WLVTerritory;
        comm22.Commissionable_Amount2__c=10.00;
       
        //insert comm3;
        allcommissions.add(comm22);
        Commission__c  comm23 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata23.Id,rectypidq,null,false);
        comm23.Related_to_Asset__c = assets.Id;
        comm23.Asset_Amount__c = 100;
        comm23.line_type__C = 'Add';
        comm23.user_team__c = WLVTerritory;
        comm23.Commissionable_Amount2__c=10.00;
        comm23.Related_to_Quota__c=QuotaHandler.ID;
        
        //insert comm3;
        allcommissions.add(Comm23);
        Commission__c  comm24 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata24.Id,rectypidq,null,false);
        comm24.Related_to_Asset__c = assets.Id;
        comm24.Asset_Amount__c = 100;
        comm24.line_type__C = 'Add';
        comm24.user_team__c = WLVTerritory;
        comm24.Commissionable_Amount2__c=10.00;
        comm24.related_to_quota__C=QuotaHandler.Id;       
        allcommissions.add(comm24);
        
        Commission__c  comm246 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata26.Id,rectypidq,null,false);
        comm246.Related_to_Asset__c = assets.Id;
        comm246.Asset_Amount__c = 100;
        comm246.line_type__C = 'Add';
        comm246.user_team__c = WLVTerritory;
        comm246.Commissionable_Amount2__c=10.00;
        comm246.related_to_quota__C=QuotaHandler.Id;       
        allcommissions.add(comm246);
        
        Commission__c  comm241 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata27.Id,rectypidq,null,false);
        comm241.Related_to_Asset__c = assets.Id;
        comm241.Asset_Amount__c = 100;
        comm241.line_type__C = 'Add';
        comm241.user_team__c = WLVTerritory;
        comm241.Commissionable_Amount2__c=10.00;
        comm241.related_to_quota__C=QuotaHandler.Id;       
        allcommissions.add(comm241);
        
        Commission__c  comm242 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata28.Id,rectypidq,null,false);
        comm242.Related_to_Asset__c = assets.Id;
        comm242.Asset_Amount__c = 100;
        comm242.line_type__C = 'Add';
        comm242.user_team__c = WLVTerritory;
        comm242.Commissionable_Amount2__c=10.00;
        comm242.related_to_quota__C=QuotaHandler.Id;       
        allcommissions.add(comm242);
        
        //Renew
        
        Commission__c  commr = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata.Id,rectypidq,null,false);
        commr.Related_to_Asset__c = assets.Id;
        commr.Asset_Amount__c = 100;
        commr.line_type__C = 'Renew';
        commr.user_team__c = WLVTerritory;
        commr.Commissionable_Amount2__c= 10.00;
        //insert comm;   
        allcommissions.add(commr);
        Commission__c  comm1r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata.Id,rectypidq,null,false);
        comm1r.Related_to_Asset__c = assets.Id;
        comm1r.Asset_Amount__c = 100;
        comm1r.line_type__C = 'Renew';
        comm1r.user_team__c = WLVTerritory;
        comm1r.Commissionable_Amount2__c=10.00;
        //insert comm1; 
        allcommissions.add(comm1r);
        Commission__c  comm2r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata2.Id,rectypidq,null,false);
        comm2r.Related_to_Asset__c = assets.Id;
        comm2r.Asset_Amount__c = 100;
        comm2r.line_type__C = 'Renew';
        comm2r.user_team__c = WLVTerritory;
        comm2r.Commissionable_Amount2__c=10.00;
        //insert comm2;
        allcommissions.add(comm2r);
        Commission__c  comm3r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata3.Id,rectypidq,null,false);
        comm3r.Related_to_Asset__c = assets.Id;
        comm3r.Asset_Amount__c = 100;
        comm3r.line_type__C = 'Renew';
        comm3r.user_team__c = WLVTerritory;
        comm3r.Commissionable_Amount2__c=10.00;
        allcommissions.add(comm3r);
        Commission__c  comm4r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata4.Id,rectypidq,null,false);
        comm4r.Related_to_Asset__c = assets.Id;
        comm4r.Asset_Amount__c = 100;
        comm4r.line_type__C = 'Renew';
        comm4r.user_team__c = WLVTerritory;
        comm4r.Commissionable_Amount2__c=10.00;
        
        //insert comm3;
        allcommissions.add(comm4r);
        Commission__c  comm5r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata5.Id,rectypidq,null,false);
        comm5r.Related_to_Asset__c = assets.Id;
        comm5r.Asset_Amount__c = 100;
        comm5r.line_type__C = 'Renew';
        comm5r.user_team__c = WLVTerritory;
        comm5r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm5r);
        Commission__c  comm6r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata6.Id,rectypidq,null,false);
        comm6r.Related_to_Asset__c = assets.Id;
        comm6r.Asset_Amount__c = 100;
        comm6r.line_type__C = 'Renew';
        comm6r.user_team__c = WLVTerritory;
        comm6r.Commissionable_Amount2__c=10.00;
        
        //insert comm3;
        allcommissions.add(comm6r);
        Commission__c  comm7r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata7.Id,rectypidq,null,false);
        comm7r.Related_to_Asset__c = assets.Id;
        comm7r.Asset_Amount__c = 100;
        comm7r.line_type__C = 'Renew';
        comm7r.user_team__c = WLVTerritory;
        comm7r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm7r);
        Commission__c  comm8r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata8.Id,rectypidq,null,false);
        comm8r.Related_to_Asset__c = assets.Id;
        comm8r.Asset_Amount__c = 100;
        comm8r.line_type__C = 'Renew';
        comm8r.user_team__c = WLVTerritory;
        comm8r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm8r);
        Commission__c  comm9r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata9.Id,rectypidq,null,false);
        comm9r.Related_to_Asset__c = assets.Id;
        comm9r.Asset_Amount__c = 100;
        comm9r.line_type__C = 'Renew';
        comm9r.user_team__c = WLVTerritory;
        comm9r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm9r);
        Commission__c  comm10r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata10.Id,rectypidq,null,false);
        comm10r.Related_to_Asset__c = assets.Id;
        comm10r.Asset_Amount__c = 100;
        comm10r.line_type__C = 'Renew';
        comm10r.user_team__c = WLVTerritory;
        comm10r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm10r);
        Commission__c  comm25r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata25.Id,rectypidq,null,false);
        comm25r.Related_to_Asset__c = assets.Id;
        comm25r.Asset_Amount__c = 100;
        comm25r.line_type__C = 'Renew';
        comm25r.user_team__c = WLVTerritory;
        comm25r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm25r);
        Commission__c  comm11r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata11.Id,rectypidq,null,false);
        comm11r.Related_to_Asset__c = assets.Id;
        comm11r.Asset_Amount__c = 100;
        comm11r.line_type__C = 'Renew';
        comm11r.user_team__c = WLVTerritory;
        comm11r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm11r);
        Commission__c  comm12r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata12.Id,rectypidq,null,false);
        comm12r.Related_to_Asset__c = assets.Id;
        comm12r.Asset_Amount__c = 100;
        comm12r.line_type__C = 'Renew';
        comm12r.user_team__c = WLVTerritory;
        comm12r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm12r);
        Commission__c  comm13r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata13.Id,rectypidq,null,false);
        comm13r.Related_to_Asset__c = assets.Id;
        comm13r.Asset_Amount__c = 100;
        comm13r.line_type__C = 'Renew';
        comm13r.user_team__c = WLVTerritory;
        comm13r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm13r);
        Commission__c  comm14r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata14.Id,rectypidq,null,false);
        comm14r.Related_to_Asset__c = assets.Id;
        comm14r.Asset_Amount__c = 100;
        comm14r.line_type__C = 'Renew';
        comm14r.user_team__c = WLVTerritory;
        comm14r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm14r);
        Commission__c  comm15r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata15.Id,rectypidq,null,false);
        comm15r.Related_to_Asset__c = assets.Id;
        comm15r.Asset_Amount__c = 100;
        comm15r.line_type__C = 'Renew';
        comm15r.user_team__c = WLVTerritory;
        comm15r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm15r);
        Commission__c  comm16r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata16.Id,rectypidq,null,false);
        comm16r.Related_to_Asset__c = assets.Id;
        comm16r.Asset_Amount__c = 100;
        comm16r.line_type__C = 'Renew';
        comm16r.user_team__c = WLVTerritory;
        comm16r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm16r);
        Commission__c  comm17r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata17.Id,rectypidq,null,false);
        comm17r.Related_to_Asset__c = assets.Id;
        comm17r.Asset_Amount__c = 100;
        comm17r.line_type__C = 'Renew';
        comm17r.user_team__c = WLVTerritory;
        comm17r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm17r);
        Commission__c  comm18r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata18.Id,rectypidq,null,false);
        comm18r.Related_to_Asset__c = assets.Id;
        comm18r.Asset_Amount__c = 100;
        comm18r.line_type__C = 'Renew';
        comm18r.user_team__c = WLVTerritory;
        comm18r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm18r);
        Commission__c  comm19r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata19.Id,rectypidq,null,false);
        comm19r.Related_to_Asset__c = assets.Id;
        comm19r.Asset_Amount__c = 100;
        comm19r.line_type__C = 'Renew';
        comm19r.user_team__c = WLVTerritory;
        comm19r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm19r);
        Commission__c  comm20r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata20.Id,rectypidq,null,false);
        comm20r.Related_to_Asset__c = assets.Id;
        comm20r.Asset_Amount__c = 100;
        comm20r.line_type__C = 'Renew';
        comm20r.user_team__c = WLVTerritory;
        comm20r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm20r);
        Commission__c  comm21r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata21.Id,rectypidq,null,false);
        comm21r.Related_to_Asset__c = assets.Id;
        comm21r.Asset_Amount__c = 100;
        comm21r.line_type__C = 'Renew';
        comm21r.user_team__c = WLVTerritory;
        comm21r.Commissionable_Amount2__c=10.00;
        //insert comm3;
        allcommissions.add(comm21r);
        Commission__c  comm22r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata22.Id,rectypidq,null,false);
        comm22r.Related_to_Asset__c = assets.Id;
        comm22r.Asset_Amount__c = 100;
        comm22r.line_type__C = 'Renew';
        comm22r.user_team__c = WLVTerritory;
        comm22r.Commissionable_Amount2__c=10.00;
       
        //insert comm3;
        allcommissions.add(comm22r);
        Commission__c  comm23r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata23.Id,rectypidq,null,false);
        comm23r.Related_to_Asset__c = assets.Id;
        comm23r.Asset_Amount__c = 100;
        comm23r.line_type__C = 'Renew';
        comm23r.user_team__c = WLVTerritory;
        comm23r.Commissionable_Amount2__c=10.00;
        comm23r.Related_to_Quota__c=QuotaHandler.ID;
        
        //insert comm3;
        allcommissions.add(Comm23r);
        Commission__c  comm24r = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata24.Id,rectypidq,null,false);
        comm24r.Related_to_Asset__c = assets.Id;
        comm24r.Asset_Amount__c = 100;
        comm24r.line_type__C = 'Renew';
        comm24r.user_team__c = WLVTerritory;
        comm24r.Commissionable_Amount2__c=10.00;
        comm24r.related_to_quota__C=QuotaHandler.Id;       
        allcommissions.add(comm24r);
        Commission__c  comm25r1 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata26.Id,rectypidq,null,false);
        comm25r1.Related_to_Asset__c = assets.Id;
        comm25r1.Asset_Amount__c = 100;
        comm25r1.line_type__C = 'Renew';
        comm25r1.user_team__c = WLVTerritory;
        comm25r1.Commissionable_Amount2__c=10.00;
        comm25r1.related_to_quota__C=QuotaHandler.Id;
        comm25r1.Renewal_w_Qualifier_Comm_ble_Amount__c =122;      
        allcommissions.add(comm25r1);
        
        Commission__c  comm25r12 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata27.Id,rectypidq,null,false);
        comm25r12.Related_to_Asset__c = assets.Id;
        comm25r12.Asset_Amount__c = 100;
        comm25r12.line_type__C = 'Renew';
        comm25r12.user_team__c = WLVTerritory;
        comm25r12.Commissionable_Amount2__c=10.00;
        comm25r12.related_to_quota__C=QuotaHandler.Id;
        comm25r12.Renewal_w_Qualifier_Comm_ble_Amount__c =122;      
        allcommissions.add(comm25r12);
        
        Commission__c  comm25r13 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata28.Id,rectypidq,null,false);
        comm25r13.Related_to_Asset__c = assets.Id;
        comm25r13.Asset_Amount__c = 100;
        comm25r13.line_type__C = 'Renew';
        comm25r13.user_team__c = WLVTerritory;
        comm25r13.Commissionable_Amount2__c=10.00;
        comm25r13.related_to_quota__C=QuotaHandler1.Id;
        comm25r13.Renewal_w_Qualifier_Comm_ble_Amount__c =122;      
        allcommissions.add(comm25r13);
        
        Commission__c  comm25r134 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata29.Id,rectypidq,null,false);
        comm25r134.Related_to_Asset__c = assets.Id;
        comm25r134.Asset_Amount__c = 100;
        comm25r134.line_type__C = 'Renew';
        comm25r134.user_team__c = WLVTerritory;
        comm25r134.Commissionable_Amount2__c=10.00;
        comm25r134.related_to_quota__C=QuotaHandler1.Id;
        comm25r134.Renewal_w_Qualifier_Comm_ble_Amount__c =122;      
        allcommissions.add(comm25r134);
        
        Commission__c  comm25r1345 = Commissions_TestDataFactory.CreateComm(QuotaHandler1.Id, prdctdata30.Id,rectypidq,null,false);
        comm25r1345.Related_to_Asset__c = assets.Id;
        comm25r1345.Asset_Amount__c = 100;
        comm25r1345.line_type__C = 'Renew';
        comm25r1345.user_team__c = WLVTerritory;
        comm25r1345.Commissionable_Amount2__c=10.00;
        comm25r1345.related_to_quota__C=QuotaHandler1.Id;
        comm25r1345.Renewal_w_Qualifier_Comm_ble_Amount__c =122;      
        allcommissions.add(comm25r1345);
        
        insert allcommissions; 
        test.starttest();     
        Commissions_PayoutCalculation cp = new Commissions_PayoutCalculation();
        system.debug('QuotaIds--->'+QuotaIds);
        system.debug('mapQuotas--->'+mapQuotas);
        cp.PayoutCalculation(QuotaIds,mapQuotas);
        Test.stoptest();
    }
}