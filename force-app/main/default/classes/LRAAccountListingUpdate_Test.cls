@isTest
public class LRAAccountListingUpdate_Test {

    static testMethod void lrraAccountListingTest(){
        
        //Inserting Customsetting for Account 
        DisabledTrigger__c Dtrg = new DisabledTrigger__c(Name= 'Disabled',TaskTrigger__c = 'Test@test.com',AssetTrigger__c = 'Test@test.com');
            insert Dtrg;    
        Account theAccount = TestDataFactory.createAccount('The Test Account', null, false);
        theAccount.Primary_Email__c = 'theAccount@move.com';
        theAccount.Type = Constants.OFFICE_ACCOUNT_TYPE;
        theAccount.Party_ID__c = '1235';   
        insert theAccount;
        system.debug('theAccount:' + theAccount.Id);
        
       list<Account_Listing__c> accListings =new list<Account_Listing__c>();
        for(integer i=0;i<10;i++){
        Account_Listing__c acclist = new Account_Listing__c(Name='test',Listing_Count__c=5,Listing_Type__c='test',Zip__c='12345',Account_Name__c=theAccount.id, CFCB_City_Fast__c=12345, 
                                                            CFCB_City_Flex__c=12345,  CFCB_City_Half_Fast__c=12345, CFCB_City_Half_Flex__c=12345, CFCB_CITYHALF_TIER__c=12345, 
                                                            CFCB_CITY_TIER__c=12345,  CFCB_Full_Fast__c=12345,  CFCB_Full_Flex__c=12345,  CFCB_FULL_TIER__c=12345,  
                                                            CFCB_Half_Fast__c=12345,  CFCB_Half_Flex__c=12345,  CFCB_HALF_TIER__c=12345,  DAP__c=12345, FAC_COMP_Qty__c=12345,   
                                                            FAC_LB_Qty__c=12345,  FAC_MREC_Qty__c=12345,    FH__c=12345,  Hand_Raiser__c=12345, Featured_CMA_SM__c=12345, 
                                                            Home_Search__c =12345,Parent_Agent_Broker__c=theAccount.id);
        acclistings.add(acclist);
        }
        insert acclistings;
        
        apexpages.standardsetcontroller ssc ;//= new apexPages.StandardsetController(acclistings);
        //apexpages.standardsetcontroller ssc = new apexPages.StandardsetController(acclistings);
        LRAccountListingUpdate lraController =new LRAccountListingUpdate(ssc);
        lraController.jsonStr =  '{ "available_inventories" : [   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "COBROKE",     "market_type": "CITY",     "product_size": "FULL",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "COBROKE",     "market_type": "CITY",     "product_size": "HALF",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "COBROKE",     "market_type": "POSTAL CODE",     "product_size": "FULL",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "COBROKE",     "market_type": "POSTAL CODE",     "product_size": "HALF",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "COBROKE",     "market_type": "CITY",     "product_size": "FULL",     "lead_routing": "FAST",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "COBROKE",     "market_type": "CITY",     "product_size": "HALF",     "lead_routing": "FAST",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "COBROKE",     "market_type": "POSTAL CODE",     "product_size": "FULL",     "lead_routing": "FAST",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "COBROKE",     "market_type": "POSTAL CODE",     "product_size": "HALF",     "lead_routing": "FAST",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "DIGITALAGENT",     "market_type": "City",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "DIGITALAGENT",     "market_type": "CITY",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "FEATCMA",     "market_type": "TERRITORY",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "FEATHOMES",     "market_type": "POSTAL CODE",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "HANDRAISER",     "market_type": "POSTAL CODE",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "123456",     "part_number": "HOMESRCH",     "market_type": "TERRITORY",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",    "part_number": "COBROKE",     "market_type": "CITY",     "product_size": "FULL",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "COBROKE",     "market_type": "CITY",     "product_size": "HALF",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "COBROKE",     "market_type": "POSTAL CODE",     "product_size": "FULL",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "COBROKE",     "market_type": "POSTAL CODE",     "product_size": "HALF",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "COBROKE",     "market_type": "CITY",     "product_size": "FULL",     "lead_routing": "FAST",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "COBROKE",     "market_type": "CITY",     "product_size": "HALF",     "lead_routing": "FAST",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "COBROKE",     "market_type": "POSTAL CODE",     "product_size": "FULL",     "lead_routing": "FAST",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "COBROKE",     "market_type": "POSTAL CODE",     "product_size": "HALF",     "lead_routing": "FAST",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "DIGITALAGENT",     "market_type": "City",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "DIGITALAGENT",     "market_type": "CITY",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "FEATCMA",     "market_type": "TERRITORY",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "FEATHOMES",     "market_type": "POSTAL CODE",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "HANDRAISER",     "market_type": "POSTAL CODE",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   },   {     "postal_code": "93010",     "party_id": "67890",     "part_number": "HOMESRCH",     "market_type": "TERRITORY",     "product_size": "STANDARD",     "lead_routing": "FLEX",     "price_tier": 10,     "available": 1   }  ] }';
        lraController.setAccountId(theAccount.id);
        string accId = lraController.getAccountId();
        pagereference p= lraController.updateListings();
              
    }
}